<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- CSS links (Bootstrap, icons, etc.) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
      href="https://fonts.googleapis.com/css2?family=Arsenal+SC:ital,wght@0,400;0,700;1,400;1,700&family=DM+Serif+Text:ital@0;1&family=News+Cycle:wght@400;700&family=Newsreader:opsz,wght@6..72,700&family=Quicksand:wght@300..700&display=swap"
      rel="stylesheet">
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="vendor/aos/aos.css" rel="stylesheet">
  <link href="vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="css/main.css" rel="stylesheet">

  <title>YallaFix Sign Up</title>
</head>

<body class="index-page">
  <!-- Global header -->
  <header id="header" class="header d-flex align-items-center sticky-top">
    <div class="container-fluid container-xl position-relative d-flex align-items-center justify-content-between">
      <a href="index.html" class="logo d-flex align-items-center">
        <h1 class="sitename"><span>Y</span>alla<span>F</span>ix</h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="index.html" class="active">Home</a></li>
          <li><a href="index.html#about">About</a></li>
          <li><a href="index.html#services">Services</a></li>
          <li><a href="index.html#contact">Contact</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>
    </div>
  </header>

  <main class="main">
    <!-- Sign Up Form -->
    <section class="col-md-12">
      <div class="container-help-box d-flex flex-column justify-content-center align-items-center">
        <div class="signup-details">
          <h2>Sign Up Form</h2>
          <!-- We prevent the form from auto-submitting so we can handle it with JS -->
          <form id="signupForm" onsubmit="return false;">
            <div class="form-group" style="margin-top: 10%;">
              <!-- Phone number input -->
              <input 
                type="text" 
                class="form-control" 
                id="phoneNumber"
                placeholder="Phone Number (e.g., +1234567890)" 
                required
              >
            </div>
            <div class="col-md-12 text-center" style="margin-top: 10%;">
              <!-- Button to send WhatsApp OTP -->
              <button 
                class="button-format" 
                type="button" 
                onclick="sendWhatsAppOTP()"
              >
                Send Code
              </button>
            </div>
            <div class="form-group" style="margin-top: 10%;">
              <!-- OTP/Confirmation code input -->
              <input 
                type="text" 
                class="form-control" 
                id="confirmationCode"
                placeholder="Confirmation Code" 
                required
              >
            </div>
            <div class="col-md-12 text-center" style="margin-top: 10%;">
              <!-- Button to verify OTP -->
              <button 
                class="button-format" 
                type="button" 
                onclick="verifyWhatsAppOTP()"
              >
                Sign up
              </button>
            </div>
          </form>
          <p id="message" style="margin-top: 10px; font-weight: bold;"></p>
        </div>
      </div>
    </section>

    <!-- Example of other content (icon-boxes, contact details, etc.) could go here -->
    <section class="col-md-12">
      <div class="icon-boxes position-relative" data-aos="fade-up" data-aos-delay="200">
        <div class="container position-relative row gy-4 mt-5">
          <!-- ... your existing code ... -->
        </div>
      </div>
    </section>

    <section id="service-details" class="service-details section">
      <div class="container">
        <!-- ... your existing code ... -->
      </div>
    </section>
  </main>

  <!-- Global footer -->
  <footer id="footer" class="footer light-background">
    <div class="container">
      <div class="copyright text-center">
        <p>Â© <span>Copyright</span>
          <strong class="px-1 sitename">YallaFix</strong>
          <span>All Rights Reserved</span>
        </p>
      </div>
      <div class="social-links d-flex justify-content-center">
        <a href=""><i class="bi bi-twitter-x"></i></a>
        <a href=""><i class="bi bi-facebook"></i></a>
        <a href=""><i class="bi bi-instagram"></i></a>
        <a href=""><i class="bi bi-linkedin"></i></a>
      </div>
      <div class="credits">
        Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
      </div>
    </div>
  </footer>

  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center">
    <i class="bi bi-arrow-up-short"></i>
  </a>

  <!-- Vendor JS Files -->
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="vendor/php-email-form/validate.js"></script>
  <script src="vendor/aos/aos.js"></script>
  <script src="vendor/glightbox/js/glightbox.min.js"></script>
  <script src="js/main.js"></script>

  <!-- JavaScript for OTP Flow -->
  <script>
    async function sendWhatsAppOTP() {
      const phoneNumber = document.getElementById('phoneNumber').value;
      try {
        const response = await fetch('/send-otp', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ phoneNumber })
        });
        const data = await response.json();
        document.getElementById('message').innerText = data.message;
      } catch (error) {
        console.error('Error sending OTP:', error);
        document.getElementById('message').innerText = 'Failed to send OTP';
      }
    }

    async function verifyWhatsAppOTP() {
      const phoneNumber = document.getElementById('phoneNumber').value;
      const userOtp = document.getElementById('confirmationCode').value;
      try {
        const response = await fetch('/verify-otp', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ phoneNumber, userOtp })
        });
        const data = await response.json();
        document.getElementById('message').innerText = data.message;
      } catch (error) {
        console.error('Error verifying OTP:', error);
        document.getElementById('message').innerText = 'Failed to verify OTP';
      }
    }
  </script>
</body>
</html>
